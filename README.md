# CoinReal - å¸åœˆå¤§ä¼—ç‚¹è¯„

> é¦–ä¸ªè®©ç”¨æˆ·é€šè¿‡è¯„è®ºä¸ç‚¹èµå³å¯èµšå–åŠ å¯†è´§å¸å¥–åŠ±çš„å»ä¸­å¿ƒåŒ–å†…å®¹ç¤¾åŒº

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

### äº§å“å®šä½
CoinReal æ˜¯ä¸€ä¸ªåˆ›æ–°çš„å»ä¸­å¿ƒåŒ–å†…å®¹ç¤¾åŒºå¹³å°ï¼Œé€šè¿‡åŒºå—é“¾æŠ€æœ¯å®ç°"è¯„è®ºå³æ”¶ç›Šã€ç‚¹èµå³èµšå¸"çš„å•†ä¸šæ¨¡å¼ã€‚ç”¨æˆ·å¯ä»¥åœ¨å„å¤§åŠ å¯†é¡¹ç›®çš„è®¨è®ºæ ç›®ä¸­å‘è¡¨è¯„è®ºã€ç‚¹èµæ”¯æŒä¼˜è´¨å†…å®¹ï¼Œå¹¶è·å¾—ç›¸åº”çš„ä»£å¸å¥–åŠ±ã€‚èµåŠ©æ–¹å¯ä»¥èµåŠ©ä»–å–œæ¬¢çš„é¡¹ç›®ï¼ŒèµåŠ©çš„é‡‘é¢ä¼šæ ¹æ®åŠ¨æ€å¥–æ± åˆ†é…ç»™è¯„è®ºå’Œç‚¹èµçš„ç”¨æˆ·ã€‚

### æ ¸å¿ƒæ„¿æ™¯
æ‰“é€ ä¸€ä¸ªå®Œå…¨å»ä¸­å¿ƒåŒ–çš„å†…å®¹ä»·å€¼è¯„ä¼°ç”Ÿæ€ç³»ç»Ÿï¼Œè®©ä¼˜è´¨å†…å®¹åˆ›ä½œè€…å’Œä»·å€¼å‘ç°è€…éƒ½èƒ½è·å¾—å…¬å¹³çš„ç»æµå›æŠ¥ï¼Œæ¨åŠ¨åŠ å¯†è´§å¸ç¤¾åŒºçš„å¥åº·å‘å±•ã€‚

## ğŸ”¥ æ ¸å¿ƒäº§å“éœ€æ±‚

### 1. ç”¨æˆ·å‡†å…¥æœºåˆ¶ (å»ä¸­å¿ƒåŒ–èº«ä»½éªŒè¯)

#### 1.1 è¯„è®ºè€…å‡†å…¥æ¡ä»¶
- **æŒå¸éªŒè¯**: å†å²ä¸€ä¸ªæœˆå†…æŒæœ‰ç›®æ ‡é¡¹ç›®ä»£å¸ï¼Œä¸”å†å²èµ„äº§ä»·å€¼ â‰¥ $100 USD
- **é“¾ä¸ŠéªŒè¯**: é€šè¿‡ Chainlink é¢„è¨€æœºå®æ—¶éªŒè¯ç”¨æˆ·é’±åŒ…èµ„äº§
- **é˜²åˆ·æœºåˆ¶**: æ¯ä¸ªé’±åŒ…åœ°å€24å°æ—¶å†…ä»…å¯å¯¹åŒä¸€é¡¹ç›®å‘è¡¨ä¸€æ¡è¯„è®º

#### 1.2 ç‚¹èµè€…å‡†å…¥æ¡ä»¶  
- **æœ€ä½èµ„äº§**: å½“å‰é’±åŒ…èµ„äº§ â‰¥ $1 USD
- **æ´»è·ƒåº¦è¦æ±‚**: è´¦æˆ·éœ€æœ‰è‡³å°‘3ç¬”é“¾ä¸Šäº¤æ˜“è®°å½•
- **é¢‘ç‡é™åˆ¶**: æ¯ä¸ªåœ°å€æ¯å°æ—¶æœ€å¤šç‚¹èµ10æ¬¡
- **å…³ç³»éªŒè¯**: ä¸å¯å¯¹è‡ªå·±çš„è¯„è®ºç‚¹èµ(é€šè¿‡åˆçº¦åœ°å€æ£€æŸ¥)

### 2. ä»£å¸ç»æµæ¨¡å‹ (TokenEconomics)

#### 2.1 ç‚¹è¯„Tokenæœºåˆ¶
```
æ¯ä¸ªé¡¹ç›®åˆ›å»ºæ—¶è‡ªåŠ¨éƒ¨ç½²ç‹¬ç«‹çš„ ERC-20 "ç‚¹è¯„Token"
- Tokenåç§°: [é¡¹ç›®å]_Review_Token (ä¾‹: BTC_Review_Token)
- åˆå§‹ä¾›åº”é‡: 0 (åŠ¨æ€é“¸é€ )
- é“¸é€ æœºåˆ¶: ä»…é€šè¿‡ç”¨æˆ·è¡Œä¸ºè§¦å‘
- é”€æ¯æœºåˆ¶: å¥–æ± åˆ†é…åå…¨éƒ¨é”€æ¯,é‡ç½®æ¸¸æˆ
```

#### 2.2 Tokenè·å–è§„åˆ™
| è¡Œä¸º | è·å¾—Tokenæ•°é‡ | è§¦å‘æ¡ä»¶ |
|------|---------------|----------|
| å‘è¡¨è¯„è®º | 20 ä¸ªåŸºç¡€Token | é€šè¿‡æŒå¸éªŒè¯ |
| è¯„è®ºè¢«ç‚¹èµ | +1 ä¸ªå¥–åŠ±Token | æ¯è·å¾—ä¸€ä¸ªèµ |
| ç‚¹èµä»–äººè¯„è®º | 1 ä¸ªå‚ä¸Token | æ¯æ¬¡æœ‰æ•ˆç‚¹èµ |
| ä¼˜è´¨è¯„è®ºå¥–åŠ± | +25% Token | å¼€å¥–åè¿›å…¥çƒ­åº¦å‰10 |

#### 2.3 çƒ­åº¦è®¡ç®—å…¬å¼
```
ç”¨æˆ·çƒ­åº¦ = åŸºç¡€Token + ç‚¹èµToken + æ—¶é—´åŠ æƒå¥–åŠ±
æ—¶é—´åŠ æƒç³»æ•° = 1 + (å‘¨æœŸæ€»æ—¶é•¿ - å‚ä¸æ—¶é—´) / å‘¨æœŸæ€»æ—¶é•¿ * 0.5
```

### 3. åŠ¨æ€å¥–æ± åˆ†é…ç³»ç»Ÿ

#### 3.1 å¥–æ± èµ„é‡‘æ¥æº
- **é¡¹ç›®æ–¹èµåŠ©**: é¡¹ç›®æ–¹å¯å‘è‡ªå·±é¡¹ç›®å¥–æ± æ³¨å…¥èµ„é‡‘
- **å¹³å°æ”¶ç›Š**: äº¤æ˜“æ‰‹ç»­è´¹çš„10%è¿›å…¥å…¨å±€å¥–æ± 
- **ç¤¾åŒºæçŒ®**: ç”¨æˆ·å¯è‡ªæ„¿å‘å–œçˆ±é¡¹ç›®æçŒ®
- **åˆä½œä¼™ä¼´**: äº¤æ˜“æ‰€ã€é’±åŒ…ç­‰åˆä½œæ–¹èµåŠ©

#### 3.2 åˆ†é…æœºåˆ¶è¯¦è§£
```
åŸºç¡€å¥–åŠ±æ±  (60%): 
- æŒ‰ç”¨æˆ·Tokenå æ¯”åˆ†é…
- è®¡ç®—å…¬å¼: ç”¨æˆ·å¥–åŠ± = (ç”¨æˆ·Tokenæ•°é‡ / æ€»Tokenæ•°é‡) * åŸºç¡€å¥–æ± 

ç²¾è‹±å¥–åŠ±æ±  (25%):
- çƒ­åº¦æ’åå‰10ç”¨æˆ·å‡åˆ†
- å¹³å‡åˆ†é…,é¿å…é©¬å¤ªæ•ˆåº”

éšæœºç‚¹èµå¥–åŠ± (15%):
- ä»æ‰€æœ‰ç‚¹èµç”¨æˆ·ä¸­éšæœºé€‰æ‹©10%
- æœ€å°‘ä¿è¯1äººè·å¥–
- ä½¿ç”¨VRFéšæœºæ•°ç¡®ä¿å…¬å¹³æ€§
```

#### 3.3 å¼€å¥–å‘¨æœŸç®¡ç†
- **çµæ´»å‘¨æœŸ**: é¡¹ç›®æ–¹å¯è®¾ç½®7-30å¤©å¼€å¥–å‘¨æœŸ
- **è‡ªåŠ¨æ‰§è¡Œ**: åˆ°æœŸè‡ªåŠ¨è§¦å‘åˆ†é…,æ— éœ€äººå·¥å¹²é¢„ï¼ˆchainlink automationï¼‰
- **èµ„é‡‘å®‰å…¨**: å¥–æ± èµ„é‡‘æ‰˜ç®¡åœ¨é¡¹ç›®åˆçº¦ä¸­
- **å¥–åŠ±å‘æ”¾**ï¼šå‘æ”¾çš„å¥–åŠ±ç”±èµåŠ©çš„ETHæˆ–è€…å¯¹åº”çš„Tokenå†³å®šï¼ˆå¯èƒ½å‘æ–¹ethã€USDCã€BNB Tokenï¼‰ï¼ŒæŒ‰ç…§åˆ†é…æœºåˆ¶è‡ªåŠ¨å‘æ”¾

### 4. é¡¹ç›®ç®¡ç†ç³»ç»Ÿ

#### 4.1 é¡¹ç›®åˆ›å»ºæµç¨‹
1. **æäº¤ç”³è¯·**: å¡«å†™é¡¹ç›®åŸºæœ¬ä¿¡æ¯(åç§°ã€ç®€ä»‹ã€å®˜ç½‘ã€ç™½çš®ä¹¦)
2. **ä»£å¸éƒ¨ç½²**: è‡ªåŠ¨åˆ›å»ºé¡¹ç›®ä¸“å±çš„ç‚¹è¯„Tokenåˆçº¦
3. **å¥–æ± åˆå§‹åŒ–**: è®¾ç½®åˆå§‹å¥–æ± å’Œå¼€å¥–å‘¨æœŸ
4. **é¡¹ç›®ä¸Šçº¿**: å¼€æ”¾è¯„è®ºå’Œç‚¹èµåŠŸèƒ½

#### 4.2 é¡¹ç›®ä¿¡æ¯æ ‡å‡†
```json
{
  "name": "é¡¹ç›®åç§°",
  "symbol": "ä»£å¸ç¬¦å·", 
  "description": "é¡¹ç›®æè¿°",
  "website": "å®˜æ–¹ç½‘ç«™",
  "whitepaper": "ç™½çš®ä¹¦é“¾æ¥",
  "contractAddress": "é¡¹ç›®åˆçº¦åœ°å€",
  "chainId": "æ‰€åœ¨é“¾ID",
  "category": "é¡¹ç›®åˆ†ç±»(DeFi/NFT/GameFi/L1/L2ç­‰)",
  "launchDate": "åˆ›å»ºæ—¶é—´",
  "totalSupply": "ä»£å¸æ€»ä¾›åº”é‡",
  "marketCap": "å¸‚å€¼(é€šè¿‡é¢„è¨€æœºè·å–)"
}
```

### 5. è¯„è®ºç³»ç»Ÿè¯¦ç»†è®¾è®¡

#### 5.1 è¯„è®ºå†…å®¹è§„èŒƒ
- **å­—æ•°é™åˆ¶**: 10-500å­—ç¬¦
- **æ ¼å¼æ”¯æŒ**: æ”¯æŒMarkdownæ ¼å¼å’Œé“¾æ¥
- **å¤šè¯­è¨€**: æ”¯æŒä¸­è‹±æ–‡å†…å®¹

#### 5.2 è¯„è®ºå­˜å‚¨æœºåˆ¶
```
é“¾ä¸Šå­˜å‚¨: è¯„è®ºå“ˆå¸Œã€æ—¶é—´æˆ³ã€ä½œè€…åœ°å€ã€Tokenå¥–åŠ±è®°å½•
IPFSå­˜å‚¨: å®Œæ•´è¯„è®ºå†…å®¹(é€šè¿‡å“ˆå¸Œç´¢å¼•)
æœ¬åœ°ç¼“å­˜: å‰ç«¯å±•ç¤ºä¼˜åŒ–,å‡å°‘é“¾ä¸ŠæŸ¥è¯¢
```

#### 5.3 è¯„è®ºæ’åºç®—æ³•
```
çƒ­åº¦æ’åº = (ç‚¹è¯„Tokenæ•°) * æ—¶é—´è¡°å‡ç³»æ•°
æ—¶é—´è¡°å‡ = 1 / (1 + (å½“å‰æ—¶é—´ - å‘å¸ƒæ—¶é—´) / 86400) * 0.3
æœ€ç»ˆæ’åº = çƒ­åº¦æ’åº * (1 + éšæœºå› å­ * 0.1)
```

### 6. åŸºç¡€å®‰å…¨æœºåˆ¶

#### 6.1 æ™ºèƒ½åˆçº¦å®‰å…¨
- **æƒé™æ§åˆ¶**: åˆçº¦owneræƒé™ç®¡ç†
- **åŸºç¡€éªŒè¯**: è¾“å…¥å‚æ•°æœ‰æ•ˆæ€§æ£€æŸ¥
- **èµ„é‡‘å®‰å…¨**: å¥–æ± èµ„é‡‘å®‰å…¨å­˜å‚¨

## ğŸ”§ æŠ€æœ¯æ¶æ„å‡çº§

### æ™ºèƒ½åˆçº¦æ¶æ„
```
ProjectFactory.sol - é¡¹ç›®å·¥å‚åˆçº¦(åˆ›å»ºå’Œç®¡ç†é¡¹ç›®)
â”œâ”€â”€ ProjectManager.sol - å•ä¸ªé¡¹ç›®ç®¡ç†
â”œâ”€â”€ ReviewToken.sol - é¡¹ç›®ä¸“å±ERC20ä»£å¸  
â”œâ”€â”€ CommentSystem.sol - è¯„è®ºç³»ç»Ÿ
â”œâ”€â”€ VotingSystem.sol - ç‚¹èµæŠ•ç¥¨ç³»ç»Ÿ
â”œâ”€â”€ RewardDistributor.sol - å¥–åŠ±åˆ†é…å™¨
â””â”€â”€ PriceOracle.sol - ä»·æ ¼é¢„è¨€æœºé›†æˆ
```

### æ•°æ®æµæ¶æ„
```mermaid
graph TB
    subgraph "ç”¨æˆ·å±‚"
        A[Web3 é’±åŒ…] --> B[DAppå‰ç«¯]
    end
    
    subgraph "åº”ç”¨å±‚"
        B --> C[è¯„è®ºå‘å¸ƒ]
        B --> D[ç‚¹èµæŠ•ç¥¨] 
        B --> E[å¥–æ± æŸ¥è¯¢]
        B --> F[é¡¹ç›®ç®¡ç†]
    end
    
    subgraph "åˆçº¦å±‚"
        C --> G[CommentSystem]
        D --> H[VotingSystem]
        E --> I[RewardDistributor]
        F --> J[ProjectManager]
    end
    
    subgraph "æ•°æ®å±‚"
        G --> K[IPFSå­˜å‚¨]
        H --> L[é“¾ä¸ŠçŠ¶æ€]
        I --> M[Chainlinké¢„è¨€æœº]
        J --> N[é¡¹ç›®æ³¨å†Œè¡¨]
    end
```

### å¤šé“¾éƒ¨ç½²ç­–ç•¥
```
ä¸»é“¾ (Ethereum): æ ¸å¿ƒæ²»ç†å’Œé«˜ä»·å€¼é¡¹ç›®
ä¾§é“¾ (Polygon): æ—¥å¸¸äº¤äº’å’Œå°é¢äº¤æ˜“
Layer2 (Arbitrum): é«˜é¢‘æ“ä½œå’Œæ‰¹é‡å¤„ç†
BSC: é¢å‘å¸å®‰ç”Ÿæ€ç”¨æˆ·
```

## ğŸ“± ç”¨æˆ·ä½“éªŒè®¾è®¡

### æ ¸å¿ƒç”¨æˆ·æµç¨‹

#### æ–°ç”¨æˆ·å¼•å¯¼æµç¨‹
1. **è¿æ¥é’±åŒ…** â†’ æ£€æµ‹èµ„äº§æƒ…å†µ
2. **é€‰æ‹©é¡¹ç›®** â†’ å±•ç¤ºå¯å‚ä¸é¡¹ç›®åˆ—è¡¨
3. **äº†è§£è§„åˆ™** â†’ äº¤äº’å¼æ•™ç¨‹è¯´æ˜
4. **é¦–æ¬¡è¯„è®º** â†’ è·å¾—å¥–åŠ±ä½“éªŒæˆå°±æ„Ÿ
5. **ç¤¾åŒºäº’åŠ¨** â†’ ç‚¹èµä»–äººå†…å®¹è·å¾—Token

#### æ—¥å¸¸ä½¿ç”¨æµç¨‹
```
ç™»å½•æ£€æŸ¥èµ„äº§ â†’ æµè§ˆé¡¹ç›®åˆ—è¡¨ â†’ é€‰æ‹©æ„Ÿå…´è¶£é¡¹ç›® â†’ 
é˜…è¯»å…¶ä»–è¯„è®º â†’ å‘è¡¨ä¸ªäººè§‚ç‚¹ â†’ ç‚¹èµä¼˜è´¨å†…å®¹ â†’ 
æŸ¥çœ‹æ”¶ç›Šç»Ÿè®¡ â†’ ç­‰å¾…å¥–æ± å¼€å¥– â†’ é¢†å–å¥–åŠ±
```

### ç•Œé¢è®¾è®¡è¦æ±‚
- **ç®€æ´ç›´è§‚**: é™ä½Web3äº§å“ä½¿ç”¨é—¨æ§›
- **æ•°æ®å¯è§†åŒ–**: æ¸…æ™°å±•ç¤ºå¥–æ± ã€æ’åã€æ”¶ç›Šæ•°æ®
- **ç§»åŠ¨ä¼˜å…ˆ**: å“åº”å¼è®¾è®¡æ”¯æŒæ‰‹æœºä½¿ç”¨  
- **å¤šè¯­è¨€**: æ”¯æŒä¸­è‹±æ–‡åˆ‡æ¢
- **æ— éšœç¢**: æ”¯æŒå±å¹•é˜…è¯»å™¨ç­‰è¾…åŠ©åŠŸèƒ½

## ğŸš€ äº§å“è·¯çº¿å›¾

### Phase 1: MVPæ ¸å¿ƒåŠŸèƒ½ (3ä¸ªæœˆ)
- [ ] åŸºç¡€è¯„è®ºå’Œç‚¹èµåŠŸèƒ½
- [ ] ç®€å•å¥–æ± åˆ†é…æœºåˆ¶
- [ ] åŸºç¡€é¡¹ç›®ç®¡ç†
- [ ] Webç«¯DAppå¼€å‘
- [ ] æµ‹è¯•ç½‘éƒ¨ç½²å’Œå†…æµ‹

### Phase 2: å¢å¼ºåŠŸèƒ½ (2ä¸ªæœˆ)  
- [ ] å®Œæ•´æ²»ç†ç³»ç»Ÿ
- [ ] é«˜çº§åä½œå¼Šæœºåˆ¶
- [ ] ç§»åŠ¨ç«¯é€‚é…ä¼˜åŒ–
- [ ] å¤šé“¾æ”¯æŒæ‰©å±•
- [ ] ä¸»ç½‘æ­£å¼ä¸Šçº¿

### Phase 3: ç”Ÿæ€å»ºè®¾ (æŒç»­)
- [ ] åˆä½œä¼™ä¼´æ¥å…¥API
- [ ] æ•°æ®åˆ†æé¢æ¿
- [ ] ç¤¾åŒºæ¿€åŠ±è®¡åˆ’
- [ ] ç¬¬ä¸‰æ–¹å¼€å‘è€…SDK
- [ ] å›½é™…åŒ–å¸‚åœºæ¨å¹¿

## ğŸ¯ å•†ä¸šæ¨¡å¼

### æ”¶å…¥æ¥æº
1. **äº¤æ˜“æ‰‹ç»­è´¹**: å¥–åŠ±åˆ†é…æ—¶æ”¶å–2%æ‰‹ç»­è´¹
2. **é¡¹ç›®æ–¹æœåŠ¡è´¹**: é¡¹ç›®ä¸Šçº¿æ”¶å–ä¸€æ¬¡æ€§è´¹ç”¨
3. **é«˜çº§åŠŸèƒ½**: æ•°æ®åˆ†æã€è¥é”€å·¥å…·ç­‰å¢å€¼æœåŠ¡
4. **åˆä½œåˆ†æˆ**: ä¸äº¤æ˜“æ‰€ã€é’±åŒ…çš„åˆä½œæ”¶ç›Š

### æˆæœ¬ç»“æ„
- **å¼€å‘ç»´æŠ¤**: æŠ€æœ¯å›¢é˜Ÿè–ªèµ„å’ŒæœåŠ¡å™¨è´¹ç”¨
- **è¿è¥æ¨å¹¿**: ç¤¾åŒºå»ºè®¾å’Œå¸‚åœºè¥é”€

## ğŸ“Š å…³é”®æŒ‡æ ‡ (KPIs)

### ç”¨æˆ·å¢é•¿æŒ‡æ ‡
- æ—¥æ´»è·ƒç”¨æˆ·æ•° (DAU)
- æ–°ç”¨æˆ·æ³¨å†Œè½¬åŒ–ç‡
- ç”¨æˆ·ç•™å­˜ç‡ (7æ—¥ã€30æ—¥)
- å¹³å‡ç”¨æˆ·ç”Ÿå‘½å‘¨æœŸä»·å€¼

### å¹³å°æ´»è·ƒåº¦
- æ—¥å‡è¯„è®ºå‘å¸ƒæ•°é‡
- æ—¥å‡ç‚¹èµäº¤äº’æ¬¡æ•°  
- é¡¹ç›®è®¨è®ºå‚ä¸åº¦
- ç”¨æˆ·å¹³å‡åœç•™æ—¶é•¿

### ç»æµæŒ‡æ ‡
- å¹³å°æ€»é”ä»“ä»·å€¼ (TVL)
- å¥–æ± èµ„é‡‘å‘¨è½¬ç‡
- ç”¨æˆ·å¹³å‡æ”¶ç›Šç‡
- é¡¹ç›®æ–¹ç»­è´¹ç‡

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### ç³»ç»Ÿæ¶æ„å›¾

```mermaid
graph TB
    subgraph "å‰ç«¯å±‚ (Web DApp)"
        A[Next.js 15 + TypeScript]
        B[shadcn/ui ç»„ä»¶åº“]
        C[Tailwind CSS]
        D[é’±åŒ…è¿æ¥ (WalletConnect)]
    end
    
    subgraph "åŒºå—é“¾å±‚ (Smart Contracts)"
        E[é¡¹ç›®ç®¡ç†åˆçº¦]
        F[è¯„è®ºç³»ç»Ÿåˆçº¦]
        G[ç‚¹èµç³»ç»Ÿåˆçº¦]
        H[å¥–æ± ç®¡ç†åˆçº¦]
        I[Tokenç®¡ç†åˆçº¦]
        J[é¢„è¨€æœºåˆçº¦]
    end
    
    subgraph "å¤–éƒ¨æœåŠ¡"
        K[Chainlink Oracle]
        L[IPFS å­˜å‚¨]
        M[å¤šé“¾ç½‘ç»œæ”¯æŒ]
    end
    
    A --> D
    D --> E
    E --> F
    F --> G
    G --> H
    H --> I
    I --> J
    J --> K
    F --> L
    E --> M
```

### æŠ€æœ¯æ ˆ

#### å‰ç«¯ (Web DApp)
- **æ¡†æ¶**: Next.js 15 (App Router)
- **è¯­è¨€**: TypeScript
- **æ ·å¼**: Tailwind CSS + shadcn/ui
- **çŠ¶æ€ç®¡ç†**: React 19 å†…ç½®çŠ¶æ€
- **é’±åŒ…é›†æˆ**: WalletConnect, MetaMask
- **Web3**: ethers.js / wagmi

#### åç«¯ (Smart Contracts)
- **å¼€å‘æ¡†æ¶**: Foundry (Forge, Cast, Anvil)
- **ç¼–ç¨‹è¯­è¨€**: Solidity ^0.8.19
- **å®‰å…¨åº“**: OpenZeppelin
- **é¢„è¨€æœº**: Chainlink Price Feeds
- **å¤šé“¾æ”¯æŒ**: Ethereum, Polygon, BSC, Arbitrum
- **å­˜å‚¨**: IPFS (å»ä¸­å¿ƒåŒ–å­˜å‚¨)

#### åŸºç¡€è®¾æ–½
- **æµ‹è¯•ç½‘ç»œ**: Anvil (æœ¬åœ°), Goerli, Mumbai
- **éƒ¨ç½²å·¥å…·**: Forge Scripts
- **ç›‘æ§**: Tenderly, Etherscan
- **å®‰å…¨**: å¤šé‡ç­¾åé’±åŒ… (Gnosis Safe)

## ğŸ“ é¡¹ç›®ç»“æ„

```
CoinReal/
â”œâ”€â”€ web/                    # å‰ç«¯ DApp
â”‚   â”œâ”€â”€ app/               # Next.js App Router é¡µé¢
â”‚   â”‚   â”œâ”€â”€ page.tsx       # é¦–é¡µ Landing Page
â”‚   â”‚   â”œâ”€â”€ projects/      # é¡¹ç›®ç›¸å…³é¡µé¢
â”‚   â”‚   â”œâ”€â”€ user/          # ç”¨æˆ·ä¸ªäººä¸­å¿ƒ
â”‚   â”‚   â””â”€â”€ leaderboard/   # æ’è¡Œæ¦œé¡µé¢
â”‚   â”œâ”€â”€ components/        # React ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ui/           # åŸºç¡€ UI ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ comment-section.tsx
â”‚   â”‚   â”œâ”€â”€ wallet-connection.tsx
â”‚   â”‚   â””â”€â”€ project-layout.tsx
â”‚   â””â”€â”€ lib/              # å·¥å…·å‡½æ•°å’Œé…ç½®
â”‚
â”œâ”€â”€ background/            # åç«¯æ™ºèƒ½åˆçº¦
â”‚   â”œâ”€â”€ src/              # Solidity åˆçº¦æºç 
â”‚   â”‚   â”œâ”€â”€ ProjectManager.sol
â”‚   â”‚   â”œâ”€â”€ CommentSystem.sol
â”‚   â”‚   â”œâ”€â”€ LikeSystem.sol
â”‚   â”‚   â”œâ”€â”€ RewardPool.sol
â”‚   â”‚   â”œâ”€â”€ TokenManager.sol
â”‚   â”‚   â”œâ”€â”€ PriceOracle.sol
â”‚   â”‚   â””â”€â”€ AccessControl.sol
â”‚   â”œâ”€â”€ test/             # åˆçº¦æµ‹è¯•
â”‚   â”œâ”€â”€ script/           # éƒ¨ç½²è„šæœ¬
â”‚   â””â”€â”€ lib/              # å¤–éƒ¨ä¾èµ–
â”‚
â””â”€â”€ docs/                 # é¡¹ç›®æ–‡æ¡£
    â”œâ”€â”€ API.md            # API æ¥å£æ–‡æ¡£
    â”œâ”€â”€ DEPLOYMENT.md     # éƒ¨ç½²æŒ‡å—
    â””â”€â”€ SECURITY.md       # å®‰å…¨è¯´æ˜
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js 23+
- Foundry
- Git

# CoinReal æ™ºèƒ½åˆçº¦æ¥å£æ–‡æ¡£

## 1. åˆçº¦æ¶æ„æ¦‚è¿°

CoinRealé‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œä¸»è¦åŒ…å«ä»¥ä¸‹åˆçº¦ï¼š

### 1.1 æ ¸å¿ƒåˆçº¦
- **CoinRealPlatform**: å¹³å°ä¸»åˆçº¦ï¼Œç®¡ç†é¡¹ç›®åˆ›å»ºå’Œå…¨å±€è®¾ç½®
- **ProjectFactory**: é¡¹ç›®å·¥å‚åˆçº¦ï¼Œä½¿ç”¨æœ€å°ä»£ç†æ¨¡å¼åˆ›å»ºé¡¹ç›®
- **Project**: é¡¹ç›®å®ç°åˆçº¦ï¼Œç®¡ç†å•ä¸ªé¡¹ç›®çš„è¯„è®ºã€ç‚¹èµå’Œå¥–æ± 
- **PriceOracle**: ä»·æ ¼é¢„è¨€æœºæ¥å£ï¼Œè·å–ä»£å¸USDä»·å€¼

### 1.2 è®¾è®¡åŸåˆ™
- ä½¿ç”¨Cloneæ¨¡å¼ï¼ˆEIP-1167ï¼‰èŠ‚çœGas
- æ— åç«¯ä¾èµ–ï¼Œæ‰€æœ‰æ•°æ®å­˜å‚¨åœ¨é“¾ä¸Š
- æ”¯æŒå¤šå¸ç§å¥–æ± 
- è‡ªå¢IDå®ç°æ—¶é—´é¡ºåº

## 2. æ¥å£è¯¦ç»†è®¾è®¡

### 2.1 IPriceOracle - ä»·æ ¼é¢„è¨€æœºæ¥å£

```solidity
interface IPriceOracle {
    /**
     * @notice è·å–ä»£å¸çš„USDä»·å€¼
     * @param token ä»£å¸åœ°å€
     * @param amount ä»£å¸æ•°é‡
     * @return usdValue å¯¹åº”çš„USDä»·å€¼ï¼ˆç²¾åº¦ï¼š8ä½å°æ•°ï¼‰
     */
    function getUSDValue(address token, uint256 amount) external view returns (uint256 usdValue);
    
    /**
     * @notice æ‰¹é‡è·å–å¤šä¸ªä»£å¸çš„USDä»·å€¼
     * @param tokens ä»£å¸åœ°å€æ•°ç»„
     * @param amounts ä»£å¸æ•°é‡æ•°ç»„
     * @return totalUSDValue æ€»USDä»·å€¼
     */
    function getBatchUSDValue(
        address[] calldata tokens, 
        uint256[] calldata amounts
    ) external view returns (uint256 totalUSDValue);
}
```

### 2.2 IProject - é¡¹ç›®åˆçº¦æ¥å£

```solidity
interface IProject {
    // äº‹ä»¶å®šä¹‰
    event ProjectInitialized(string name, string symbol, address creator);
    event CommentPosted(uint256 indexed commentId, address indexed user, string content);
    event CommentLiked(uint256 indexed commentId, address indexed liker);
    event SponsorshipAdded(address indexed sponsor, address token, uint256 amount);
    event RewardsDistributed(uint256 timestamp, uint256 totalComments, uint256 totalLikes);
    
    // ç»“æ„ä½“å®šä¹‰
    struct Comment {
        uint256 id;          // è‡ªå¢IDï¼Œå®ç°æ—¶é—´é¡ºåº
        address author;      // è¯„è®ºè€…åœ°å€
        string content;      // è¯„è®ºå†…å®¹ï¼ˆ10-500å­—ç¬¦ï¼‰
        uint256 likes;       // ç‚¹èµæ•°
        uint256 crtReward;   // è·å¾—çš„CRTå¥–åŠ±
        bool isElite;        // æ˜¯å¦ä¸ºç²¾è‹±è¯„è®º
    }
    
    struct Sponsorship {
        address token;       // ä»£å¸åœ°å€
        uint256 amount;      // æ•°é‡
        address sponsor;     // èµåŠ©è€…åœ°å€
    }
    
    struct UserStats {
        uint256 totalComments;   // æ€»è¯„è®ºæ•°
        uint256 totalLikes;      // æ€»ç‚¹èµæ•°
        uint256 totalCRT;        // æ€»CRTæ•°é‡
        uint256 claimedRewards;  // å·²é¢†å–å¥–åŠ±
    }
    
    /**
     * @notice åˆå§‹åŒ–é¡¹ç›®ï¼ˆä»…èƒ½è°ƒç”¨ä¸€æ¬¡ï¼‰
     * @param _name é¡¹ç›®åç§°
     * @param _symbol é¡¹ç›®ç¬¦å·
     * @param _description é¡¹ç›®æè¿°
     * @param _category é¡¹ç›®åˆ†ç±»
     * @param _drawPeriod å¼€å¥–å‘¨æœŸï¼ˆå¤©ï¼‰
     * @param _creator åˆ›å»ºè€…åœ°å€
     * @dev ç”±å·¥å‚åˆçº¦åœ¨å…‹éš†åè°ƒç”¨
     */
    function initialize(
        string calldata _name,
        string calldata _symbol,
        string calldata _description,
        string calldata _category,
        uint16 _drawPeriod,
        address _creator
    ) external;
    
    /**
     * @notice å‘è¡¨è¯„è®º
     * @param content è¯„è®ºå†…å®¹ï¼ˆ10-500å­—ç¬¦ï¼‰
     * @return commentId è¯„è®ºID
     * @dev æ¯æ¡è¯„è®ºè‡ªåŠ¨è·å¾—5ä¸ªCRT
     */
    function postComment(string calldata content) external returns (uint256 commentId);
    
    /**
     * @notice ç‚¹èµè¯„è®º
     * @param commentId è¯„è®ºID
     * @dev æ¯ä¸ªç”¨æˆ·åªèƒ½å¯¹åŒä¸€è¯„è®ºç‚¹èµä¸€æ¬¡
     * @dev ç‚¹èµè€…è·å¾—1ä¸ªCRTï¼Œè¢«ç‚¹èµè¯„è®ºè·å¾—é¢å¤–CRT
     */
    function likeComment(uint256 commentId) external;
    
    /**
     * @notice èµåŠ©é¡¹ç›®å¥–æ± 
     * @param token ä»£å¸åœ°å€
     * @param amount æ•°é‡
     * @dev æœ€ä½èµåŠ©é‡‘é¢ä¸º100 USDç­‰å€¼ä»£å¸
     */
    function sponsor(address token, uint256 amount) external;
    
    /**
     * @notice è§¦å‘å¼€å¥–å¹¶åˆ†é…å¥–åŠ±
     * @dev éœ€è¦è‡³å°‘æœ‰1æ¡è¯„è®ºæ‰èƒ½å¼€å¥–
     * @dev æŒ‰ç…§60%è¯„è®ºå¥–åŠ±ã€25%ç‚¹èµå¥–åŠ±ã€15%ç²¾è‹±å¥–åŠ±åˆ†é…
     */
    function distributeRewards() external;
    
    /**
     * @notice ç”¨æˆ·é¢†å–å¥–åŠ±
     * @param tokens è¦é¢†å–çš„ä»£å¸åœ°å€æ•°ç»„
     * @dev æ ¹æ®ç”¨æˆ·CRTå æ¯”åˆ†é…å„ç§ä»£å¸
     */
    function claimRewards(address[] calldata tokens) external;
    
    /**
     * @notice è·å–è¯„è®ºè¯¦æƒ…
     * @param commentId è¯„è®ºID
     * @return comment è¯„è®ºä¿¡æ¯
     */
    function getComment(uint256 commentId) external view returns (Comment memory);
    
    /**
     * @notice è·å–æ‰€æœ‰è¯„è®ºï¼ˆåˆ†é¡µï¼‰
     * @param offset èµ·å§‹ä½ç½®
     * @param limit æ•°é‡é™åˆ¶
     * @return comments è¯„è®ºæ•°ç»„
     * @return total æ€»è¯„è®ºæ•°
     */
    function getComments(uint256 offset, uint256 limit) external view returns (
        Comment[] memory comments,
        uint256 total
    );
    
    /**
     * @notice è·å–ç²¾è‹±è¯„è®ºï¼ˆç‚¹èµæ•°å‰10ï¼‰
     * @return eliteComments ç²¾è‹±è¯„è®ºæ•°ç»„
     */
    function getEliteComments() external view returns (Comment[] memory eliteComments);
    
    /**
     * @notice è·å–ç”¨æˆ·ç»Ÿè®¡ä¿¡æ¯
     * @param user ç”¨æˆ·åœ°å€
     * @return stats ç”¨æˆ·ç»Ÿè®¡
     */
    function getUserStats(address user) external view returns (UserStats memory stats);
    
    /**
     * @notice è·å–å¥–æ± ä¿¡æ¯
     * @return sponsorships æ‰€æœ‰èµåŠ©è®°å½•
     * @return totalUSDValue å¥–æ± æ€»USDä»·å€¼
     */
    function getPoolInfo() external view returns (
        Sponsorship[] memory sponsorships,
        uint256 totalUSDValue
    );
    
    /**
     * @notice è·å–ç”¨æˆ·å¯é¢†å–çš„å¥–åŠ±
     * @param user ç”¨æˆ·åœ°å€
     * @return tokens ä»£å¸åœ°å€æ•°ç»„
     * @return amounts å¯é¢†å–æ•°é‡æ•°ç»„
     */
    function getPendingRewards(address user) external view returns (
        address[] memory tokens,
        uint256[] memory amounts
    );
    
    /**
     * @notice æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²ç‚¹èµæŸè¯„è®º
     * @param user ç”¨æˆ·åœ°å€
     * @param commentId è¯„è®ºID
     * @return hasLiked æ˜¯å¦å·²ç‚¹èµ
     */
    function hasUserLikedComment(address user, uint256 commentId) external view returns (bool);
    
    /**
     * @notice è·å–é¡¹ç›®ç»Ÿè®¡æ•°æ®
     * @return totalParticipants æ€»å‚ä¸äººæ•°
     * @return totalLikes æ€»ç‚¹èµæ•°
     * @return lastActivityTime æœ€åæ´»åŠ¨æ—¶é—´
     * @return currentPoolUSD å½“å‰å¥–æ± USDä»·å€¼
     */
    function getProjectStats() external view returns (
        uint256 totalParticipants,
        uint256 totalLikes,
        uint256 lastActivityTime,
        uint256 currentPoolUSD
    );
    
    /**
     * @notice è·å–ç”¨æˆ·åœ¨é¡¹ç›®ä¸­çš„æ´»åŠ¨å†å²
     * @param user ç”¨æˆ·åœ°å€
     * @param offset èµ·å§‹ä½ç½®
     * @param limit æ•°é‡é™åˆ¶
     * @return commentIds ç”¨æˆ·è¯„è®ºIDæ•°ç»„
     * @return likedCommentIds ç”¨æˆ·ç‚¹èµçš„è¯„è®ºIDæ•°ç»„
     */
    function getUserActivity(address user, uint256 offset, uint256 limit) external view returns (
        uint256[] memory commentIds,
        uint256[] memory likedCommentIds
    );
}
```

### 2.3 IProjectFactory - é¡¹ç›®å·¥å‚æ¥å£

```solidity
interface IProjectFactory {
    event ProjectCreated(address indexed project, string name, address indexed creator);
    
    /**
     * @notice åˆ›å»ºæ–°é¡¹ç›®
     * @param name é¡¹ç›®åç§°
     * @param symbol é¡¹ç›®ç¬¦å·
     * @param description é¡¹ç›®æè¿°
     * @param category é¡¹ç›®åˆ†ç±»
     * @param drawPeriod å¼€å¥–å‘¨æœŸï¼ˆå¤©ï¼‰
     * @return projectAddress æ–°é¡¹ç›®åœ°å€
     * @dev ä½¿ç”¨æœ€å°ä»£ç†æ¨¡å¼å…‹éš†é¡¹ç›®å®ç°åˆçº¦
     */
    function createProject(
        string calldata name,
        string calldata symbol,
        string calldata description,
        string calldata category,
        uint16 drawPeriod
    ) external returns (address projectAddress);
    
    /**
     * @notice è·å–é¡¹ç›®å®ç°åˆçº¦åœ°å€
     * @return implementation å®ç°åˆçº¦åœ°å€
     */
    function getImplementation() external view returns (address);
    
    /**
     * @notice é¢„æµ‹é¡¹ç›®åœ°å€
     * @param salt åˆ›å»ºç›å€¼
     * @return predicted é¢„æµ‹çš„åœ°å€
     */
    function predictProjectAddress(bytes32 salt) external view returns (address);
}
```

### 2.4 ICoinRealPlatform - å¹³å°ä¸»åˆçº¦æ¥å£

```solidity
interface ICoinRealPlatform {
    event ProjectFactoryUpdated(address indexed newFactory);
    event PriceOracleUpdated(address indexed newOracle);
    event PlatformFeeUpdated(uint256 newFee);
    
    struct ProjectInfo {
        address projectAddress;
        string name;
        string symbol;
        address creator;
        uint256 createdAt;
        bool isActive;
    }
    
    struct ProjectDetailedData {
        address projectAddress;
        string name;
        string symbol;
        string description;
        uint256 totalParticipants;
        uint256 totalComments;
        uint256 totalLikes;
        uint256 poolValueUSD;
        uint256 nextDrawTime;
        string category;
        bool isActive;
    }
    
    /**
     * @notice åˆ›å»ºæ–°é¡¹ç›®ï¼ˆä»…å¹³å°æ–¹å¯è°ƒç”¨ï¼‰
     * @param name é¡¹ç›®åç§°
     * @param symbol é¡¹ç›®ç¬¦å·
     * @param description é¡¹ç›®æè¿°
     * @param category é¡¹ç›®åˆ†ç±»
     * @param drawPeriod å¼€å¥–å‘¨æœŸï¼ˆå¤©ï¼‰
     * @return projectAddress æ–°é¡¹ç›®åœ°å€
     */
    function createProject(
        string calldata name,
        string calldata symbol,
        string calldata description,
        string calldata category,
        uint16 drawPeriod
    ) external returns (address projectAddress);
    
    /**
     * @notice è·å–æ‰€æœ‰é¡¹ç›®åˆ—è¡¨
     * @param offset èµ·å§‹ä½ç½®
     * @param limit æ•°é‡é™åˆ¶
     * @return projects é¡¹ç›®ä¿¡æ¯æ•°ç»„
     * @return total æ€»é¡¹ç›®æ•°
     */
    function getProjects(uint256 offset, uint256 limit) external view returns (
        ProjectInfo[] memory projects,
        uint256 total
    );
    
    /**
     * @notice æ ¹æ®åˆ†ç±»è·å–é¡¹ç›®
     * @param category é¡¹ç›®åˆ†ç±»ï¼ˆå¦‚ï¼šDeFi, NFT, GameFiç­‰ï¼‰
     * @return projects è¯¥åˆ†ç±»ä¸‹çš„é¡¹ç›®åœ°å€æ•°ç»„
     */
    function getProjectsByCategory(string calldata category) external view returns (address[] memory);
    
    /**
     * @notice è·å–ç”¨æˆ·å‚ä¸çš„æ‰€æœ‰é¡¹ç›®
     * @param user ç”¨æˆ·åœ°å€
     * @return projects ç”¨æˆ·å‚ä¸çš„é¡¹ç›®åœ°å€æ•°ç»„
     */
    function getUserProjects(address user) external view returns (address[] memory);
    
    /**
     * @notice æ›´æ–°ä»·æ ¼é¢„è¨€æœºåœ°å€ï¼ˆä»…ç®¡ç†å‘˜ï¼‰
     * @param newOracle æ–°çš„é¢„è¨€æœºåœ°å€
     */
    function updatePriceOracle(address newOracle) external;
    
    /**
     * @notice è®¾ç½®é¡¹ç›®å·¥å‚åˆçº¦ï¼ˆä»…ç®¡ç†å‘˜ï¼‰
     * @param newFactory æ–°çš„å·¥å‚åˆçº¦åœ°å€
     */
    function setProjectFactory(address newFactory) external;
    
    /**
     * @notice è·å–å¹³å°ç»Ÿè®¡æ•°æ®
     * @return totalProjects æ€»é¡¹ç›®æ•°
     * @return totalUsers æ€»ç”¨æˆ·æ•°
     * @return totalComments æ€»è¯„è®ºæ•°
     * @return totalPoolValue æ€»å¥–æ± ä»·å€¼ï¼ˆUSDï¼‰
     */
    function getPlatformStats() external view returns (
        uint256 totalProjects,
        uint256 totalUsers,
        uint256 totalComments,
        uint256 totalPoolValue
    );
    
    /**
     * @notice è·å–é¡¹ç›®æ’è¡Œæ¦œ
     * @param sortBy æ’åºæ–¹å¼ï¼ˆ0:å‚ä¸äººæ•°ï¼Œ1:è¯„è®ºæ•°ï¼Œ2:å¥–æ± é‡‘é¢ï¼Œ3:æœ€æ–°æ´»åŠ¨ï¼‰
     * @param offset èµ·å§‹ä½ç½®
     * @param limit æ•°é‡é™åˆ¶
     * @return projects æ’åºåçš„é¡¹ç›®åœ°å€æ•°ç»„
     * @return stats å¯¹åº”çš„ç»Ÿè®¡æ•°æ®
     */
    function getProjectLeaderboard(
        uint8 sortBy,
        uint256 offset,
        uint256 limit
    ) external view returns (
        address[] memory projects,
        uint256[] memory stats
    );
    
    /**
     * @notice è·å–ç”¨æˆ·æ’è¡Œæ¦œ
     * @param sortBy æ’åºæ–¹å¼ï¼ˆ0:æ€»CRTï¼Œ1:è¯„è®ºæ•°ï¼Œ2:è·èµæ•°ï¼Œ3:æ”¶ç›Šï¼‰
     * @param offset èµ·å§‹ä½ç½®
     * @param limit æ•°é‡é™åˆ¶
     * @return users ç”¨æˆ·åœ°å€æ•°ç»„
     * @return scores å¯¹åº”çš„åˆ†æ•°
     */
    function getUserLeaderboard(
        uint8 sortBy,
        uint256 offset,
        uint256 limit
    ) external view returns (
        address[] memory users,
        uint256[] memory scores
    );
    
    /**
     * @notice æ‰¹é‡è·å–é¡¹ç›®è¯¦ç»†æ•°æ®ï¼ˆä¼˜åŒ–å‰ç«¯è°ƒç”¨ï¼‰
     * @param projectAddresses é¡¹ç›®åœ°å€æ•°ç»„
     * @return projectsData é¡¹ç›®è¯¦ç»†æ•°æ®æ•°ç»„
     */
    function batchGetProjectsData(
        address[] calldata projectAddresses
    ) external view returns (ProjectDetailedData[] memory projectsData);
}
```

## 3. å®ç°è¦ç‚¹è¯´æ˜

### 3.1 è¯„è®ºç³»ç»Ÿ
- æ¯æ¡è¯„è®ºè‡ªåŠ¨åˆ†é…è‡ªå¢IDï¼Œä¿è¯æ—¶é—´é¡ºåº
- è¯„è®ºå†…å®¹é™åˆ¶10-500å­—ç¬¦
- å‘è¡¨è¯„è®ºè·å¾—5ä¸ªCRTåŸºç¡€å¥–åŠ±
- è¢«ç‚¹èµå¯è·å¾—é¢å¤–CRTå¥–åŠ±

### 3.2 ç‚¹èµç³»ç»Ÿ
- æ¯ä¸ªç”¨æˆ·å¯¹åŒä¸€è¯„è®ºåªèƒ½ç‚¹èµä¸€æ¬¡
- ç‚¹èµè€…è·å¾—1ä¸ªCRTå¥–åŠ±
- ä½¿ç”¨mappingè®°å½•ç‚¹èµå…³ç³»ï¼Œé˜²æ­¢é‡å¤ç‚¹èµ

### 3.3 å¥–æ± ç®¡ç†
- æ”¯æŒå¤šç§ERC20ä»£å¸èµåŠ©
- æœ€ä½èµåŠ©é‡‘é¢100 USDï¼ˆé€šè¿‡é¢„è¨€æœºéªŒè¯ï¼‰
- è®°å½•æ¯ç¬”èµåŠ©çš„ä»£å¸ç±»å‹å’Œæ•°é‡
- å¼€å¥–æ—¶æŒ‰CRTæ¯”ä¾‹åˆ†é…æ‰€æœ‰ä»£å¸

### 3.4 å¥–åŠ±åˆ†é…
- 60%åˆ†é…ç»™æ‰€æœ‰è¯„è®ºè€…ï¼ˆæŒ‰CRTå æ¯”ï¼‰
- 25%åˆ†é…ç»™æ‰€æœ‰ç‚¹èµè€…ï¼ˆæŒ‰CRTå æ¯”ï¼‰
- 15%åˆ†é…ç»™ç²¾è‹±è¯„è®ºè€…ï¼ˆç‚¹èµæ•°å‰10ï¼‰
- ç²¾è‹±è¯„è®ºç›¸åŒç‚¹èµæ•°æ—¶ï¼ŒIDè¾ƒå°è€…ï¼ˆæ›´æ—©å‘å¸ƒï¼‰ä¼˜å…ˆ

### 3.5 å·¥å‚æ¨¡å¼
- ä½¿ç”¨EIP-1167æœ€å°ä»£ç†åˆçº¦
- å¤§å¹…é™ä½éƒ¨ç½²æˆæœ¬
- æ‰€æœ‰é¡¹ç›®å…±äº«åŒä¸€å®ç°åˆçº¦é€»è¾‘

### 3.6 å®‰å…¨è€ƒè™‘
- ä½¿ç”¨ReentrancyGuardé˜²æ­¢é‡å…¥æ”»å‡»
- å¥–åŠ±é¢†å–ä½¿ç”¨Pullæ¨¡å¼ï¼Œç”¨æˆ·ä¸»åŠ¨é¢†å–
- æ‰€æœ‰å¤–éƒ¨è°ƒç”¨ä½¿ç”¨SafeERC20
- å…³é”®æ“ä½œæ·»åŠ äº‹ä»¶æ—¥å¿—

## 4. éƒ¨ç½²æµç¨‹

1. éƒ¨ç½²PriceOracleåˆçº¦ï¼ˆé›†æˆChainlinkï¼‰
2. éƒ¨ç½²Projectå®ç°åˆçº¦
3. éƒ¨ç½²ProjectFactoryåˆçº¦ï¼Œä¼ å…¥å®ç°åˆçº¦åœ°å€
4. éƒ¨ç½²CoinRealPlatformä¸»åˆçº¦
5. é…ç½®å¹³å°å‚æ•°å’Œæƒé™

## 5. Gasä¼˜åŒ–å»ºè®®

1. ä½¿ç”¨æœ€å°ä»£ç†æ¨¡å¼èŠ‚çœé¡¹ç›®åˆ›å»ºæˆæœ¬
2. æ‰¹é‡æ“ä½œæ”¯æŒï¼ˆå¦‚æ‰¹é‡é¢†å–å¥–åŠ±ï¼‰
3. ä½¿ç”¨äº‹ä»¶æ›¿ä»£éƒ¨åˆ†å­˜å‚¨ï¼Œé™ä½æˆæœ¬
4. åˆç†ä½¿ç”¨mappingå’Œæ•°ç»„ï¼Œé¿å…éå†

## 6. æœªæ¥æ‰©å±•

1. æ”¯æŒNFTå¥–åŠ±æœºåˆ¶
2. æ·»åŠ å£°èª‰ç³»ç»Ÿ
3. å®ç°DAOæ²»ç†åŠŸèƒ½
4. æ”¯æŒè·¨é“¾é¡¹ç›®åˆ›å»º
5. é›†æˆæ›´å¤šé¢„è¨€æœºæœåŠ¡

## 7. çŠ¶æ€å˜é‡è®¾è®¡ä¸Gasä¼˜åŒ–

### 7.1 Projectåˆçº¦çŠ¶æ€å˜é‡

```solidity
contract Project {
    // åŸºç¡€ä¿¡æ¯ï¼ˆSlot 1-3ï¼‰
    string public name;
    string public symbol;
    string public description;
    
    // ç´§å‡‘å­˜å‚¨ï¼ˆSlot 4ï¼‰
    address public creator;         // 20 bytes
    uint32 public createdAt;       // 4 bytes (timestamp)
    uint32 public lastDistribution; // 4 bytes
    bool public initialized;       // 1 byte
    bool public isActive;          // 1 byte
    uint16 public drawPeriod;      // 2 bytes (days)
    
    // è®¡æ•°å™¨ï¼ˆSlot 5ï¼‰
    uint128 public nextCommentId;  // 16 bytes (è¶³å¤Ÿå¤§)
    uint128 public totalCRT;       // 16 bytes
    
    // æ ¸å¿ƒæ˜ å°„
    mapping(uint256 => Comment) public comments;
    mapping(address => UserStats) public userStats;
    mapping(address => mapping(uint256 => bool)) public hasLiked;
    
    // å¥–æ± ç®¡ç†
    Sponsorship[] public sponsorships;
    mapping(address => uint256) public tokenBalances;  // token => amount
    address[] public sponsoredTokens;
    
    // ç”¨æˆ·å¥–åŠ±è¿½è¸ª
    mapping(address => mapping(address => uint256)) public userPendingRewards; // user => token => amount
    mapping(address => uint256) public userCRTSnapshot; // å¼€å¥–æ—¶çš„CRTå¿«ç…§
    
    // ç²¾è‹±è¯„è®ºè¿½è¸ªï¼ˆGasä¼˜åŒ–ï¼‰
    uint256[10] public topCommentIds;  // å›ºå®šå¤§å°æ•°ç»„
    uint256 public minEliteLikes;     // è¿›å…¥å‰10çš„æœ€ä½ç‚¹èµæ•°
    
    // CRTåˆ†é…è¿½è¸ª
    uint256 public totalCommentCRT;    // æ‰€æœ‰è¯„è®ºè€…çš„CRTæ€»å’Œ
    uint256 public totalLikeCRT;       // æ‰€æœ‰ç‚¹èµè€…çš„CRTæ€»å’Œ
    uint256 public totalEliteCRT;      // ç²¾è‹±è¯„è®ºè€…çš„CRTæ€»å’Œ
}
```

### 7.2 CoinRealPlatformçŠ¶æ€å˜é‡

```solidity
contract CoinRealPlatform {
    // æ ¸å¿ƒåœ°å€ï¼ˆSlot 1ï¼‰
    address public owner;           // 20 bytes
    uint96 private _reserved;       // 12 bytes (é¢„ç•™ç©ºé—´)
    
    // åˆçº¦åœ°å€ï¼ˆSlot 2-3ï¼‰
    address public projectFactory;
    address public priceOracle;
    
    // é¡¹ç›®ç®¡ç†
    address[] public allProjects;
    mapping(string => address[]) public projectsByCategory;
    mapping(address => ProjectInfo) public projectInfo;
    
    // ç”¨æˆ·è¿½è¸ª
    mapping(address => address[]) public userProjects;
    mapping(address => bool) public userExists;
    address[] public allUsers;
    
    // ç»Ÿè®¡æ•°æ®ï¼ˆSlot 4-5ï¼‰
    uint128 public totalComments;
    uint128 public totalPoolValueUSD;
}
```

### 7.3 å…³é”®å®ç°ç»†èŠ‚

#### è¯„è®ºå­˜å‚¨ä¼˜åŒ–
```solidity
// Gasä¼˜åŒ–ï¼šè¯„è®ºå†…å®¹ä½¿ç”¨äº‹ä»¶å­˜å‚¨ï¼Œé“¾ä¸Šåªå­˜å‚¨å“ˆå¸Œ
struct Comment {
    uint128 id;          // 16 bytes
    address author;      // 20 bytes
    uint32 timestamp;    // 4 bytes
    uint32 likes;        // 4 bytes  
    uint32 crtReward;    // 4 bytes
    bool isElite;        // 1 byte
    bytes32 contentHash; // 32 bytes (å†…å®¹å“ˆå¸Œ)
}

// å®é™…å†…å®¹é€šè¿‡äº‹ä»¶å‘å‡º
event CommentPosted(
    uint256 indexed commentId, 
    address indexed author,
    string content,    // å®Œæ•´å†…å®¹åœ¨äº‹ä»¶ä¸­
    bytes32 contentHash
);
```

#### ç²¾è‹±è¯„è®ºé€‰æ‹©ä¼˜åŒ–
```solidity
// é¿å…éå†æ‰€æœ‰è¯„è®ºï¼Œä½¿ç”¨å›ºå®šå¤§å°æ•°ç»„ç»´æŠ¤Top10
function updateEliteComments(uint256 commentId, uint256 newLikes) internal {
    if (newLikes <= minEliteLikes && topCommentIds[9] != 0) return;
    
    // äºŒåˆ†æŸ¥æ‰¾æ’å…¥ä½ç½®
    uint256 insertPos = findInsertPosition(newLikes, commentId);
    if (insertPos < 10) {
        // ç§»åŠ¨æ•°ç»„å…ƒç´ 
        for (uint256 i = 9; i > insertPos; i--) {
            topCommentIds[i] = topCommentIds[i-1];
        }
        topCommentIds[insertPos] = commentId;
        
        // æ›´æ–°æœ€ä½é—¨æ§›
        if (topCommentIds[9] != 0) {
            minEliteLikes = comments[topCommentIds[9]].likes;
        }
    }
}
```

#### å¥–åŠ±åˆ†é…ä¼˜åŒ–
```solidity
// ä½¿ç”¨å¿«ç…§æœºåˆ¶é¿å…é‡å¤è®¡ç®—
function distributeRewards() external {
    require(block.timestamp >= lastDistribution + drawPeriod * 1 days, "Too early");
    require(nextCommentId > 1, "No comments");
    
    // åˆ›å»ºCRTå¿«ç…§
    uint256 snapshot = block.timestamp;
    totalCommentCRT = calculateCommentCRT();
    totalLikeCRT = calculateLikeCRT();
    totalEliteCRT = calculateEliteCRT();
    
    // é¢„è®¡ç®—æ¯ç§ä»£å¸çš„åˆ†é…
    for (uint256 i = 0; i < sponsoredTokens.length; i++) {
        address token = sponsoredTokens[i];
        uint256 balance = tokenBalances[token];
        
        // æŒ‰æ¯”ä¾‹åˆ†é…
        tokenDistribution[token] = TokenDistribution({
            commentPool: balance * 60 / 100,
            likePool: balance * 25 / 100,
            elitePool: balance * 15 / 100,
            snapshot: snapshot
        });
    }
    
    lastDistribution = uint32(block.timestamp);
    emit RewardsDistributed(snapshot, nextCommentId - 1, totalLikes);
}
```

#### æ‰¹é‡é¢†å–ä¼˜åŒ–
```solidity
function claimRewards(address[] calldata tokens) external nonReentrant {
    uint256 userCRT = userCRTSnapshot[msg.sender];
    require(userCRT > 0, "No rewards");
    
    for (uint256 i = 0; i < tokens.length; i++) {
        address token = tokens[i];
        TokenDistribution memory dist = tokenDistribution[token];
        
        uint256 reward = calculateUserReward(msg.sender, userCRT, dist);
        if (reward > 0) {
            userPendingRewards[msg.sender][token] = 0;
            IERC20(token).safeTransfer(msg.sender, reward);
        }
    }
    
    // æ¸…ç©ºç”¨æˆ·CRTå¿«ç…§ï¼Œé˜²æ­¢é‡å¤é¢†å–
    userCRTSnapshot[msg.sender] = 0;
}
```

### 7.4 Gasæˆæœ¬ä¼°ç®—

| æ“ä½œ | é¢„ä¼°Gas | ä¼˜åŒ–è¯´æ˜ |
|------|---------|----------|
| åˆ›å»ºé¡¹ç›® | ~50,000 | ä½¿ç”¨Cloneæ¨¡å¼ |
| å‘è¡¨è¯„è®º | ~80,000 | å†…å®¹å­˜å‚¨åœ¨äº‹ä»¶ä¸­ |
| ç‚¹èµ | ~50,000 | ç®€å•mappingæ›´æ–° |
| èµåŠ© | ~100,000 | ERC20è½¬è´¦+å­˜å‚¨ |
| å¼€å¥– | ~200,000 | é¢„è®¡ç®—+å¿«ç…§ |
| é¢†å–å¥–åŠ± | ~50,000/token | æ‰¹é‡ä¼˜åŒ– |

### 7.5 å‰ç«¯æ•°æ®è·å–ä¼˜åŒ–

```solidity
// æ‰¹é‡è·å–é¡¹ç›®æ•°æ®ï¼Œå‡å°‘RPCè°ƒç”¨
function getProjectsData(address[] calldata projects) external view returns (
    ProjectData[] memory data
) {
    data = new ProjectData[](projects.length);
    for (uint256 i = 0; i < projects.length; i++) {
        IProject project = IProject(projects[i]);
        data[i] = ProjectData({
            name: project.name(),
            symbol: project.symbol(),
            totalComments: project.nextCommentId() - 1,
            totalParticipants: project.getTotalParticipants(),
            poolValueUSD: calculatePoolValue(projects[i]),
            lastActivity: project.getLastActivityTime()
        });
    }
}
```

## 8. å®ç°æ³¨æ„äº‹é¡¹

1. **å­˜å‚¨ä¼˜åŒ–**ï¼šä½¿ç”¨ç´§å‡‘çš„structæ‰“åŒ…ï¼Œåˆç†å®‰æ’å˜é‡é¡ºåº
2. **äº‹ä»¶æ—¥å¿—**ï¼šè¯„è®ºå†…å®¹é€šè¿‡äº‹ä»¶å­˜å‚¨ï¼Œå¤§å¹…é™ä½Gas
3. **æ‰¹é‡æ“ä½œ**ï¼šæ”¯æŒæ‰¹é‡æŸ¥è¯¢å’Œæ‰¹é‡é¢†å–ï¼Œå‡å°‘äº¤æ˜“æ¬¡æ•°
4. **ç¼“å­˜æœºåˆ¶**ï¼šä½¿ç”¨å¿«ç…§é¿å…é‡å¤è®¡ç®—
5. **å›ºå®šæ•°ç»„**ï¼šç²¾è‹±è¯„è®ºä½¿ç”¨å›ºå®šå¤§å°æ•°ç»„ï¼Œé¿å…åŠ¨æ€æ•°ç»„æ“ä½œ
6. **Pullæ¨¡å¼**ï¼šç”¨æˆ·ä¸»åŠ¨é¢†å–å¥–åŠ±ï¼Œé¿å…æ‰¹é‡è½¬è´¦çš„Gasæ¶ˆè€—

## 9. å‰ç«¯åŠŸèƒ½æ”¯æŒéªŒè¯

### 9.1 é¡µé¢åŠŸèƒ½æ˜ å°„

| å‰ç«¯é¡µé¢ | ä¸»è¦åŠŸèƒ½ | å¯¹åº”åˆçº¦æ¥å£ | Gasä¼˜åŒ–æªæ–½ |
|---------|---------|-------------|------------|
| é¦–é¡µ | å±•ç¤ºçƒ­é—¨é¡¹ç›® | `getProjectLeaderboard()` | æ‰¹é‡æŸ¥è¯¢ï¼Œäº‹ä»¶ç´¢å¼• |
| é¡¹ç›®åˆ—è¡¨ | æµè§ˆæ‰€æœ‰é¡¹ç›® | `getProjects()`, `getProjectsByCategory()` | åˆ†é¡µåŠ è½½ |
| é¡¹ç›®è¯¦æƒ… | è¯„è®ºã€ç‚¹èµã€æŸ¥çœ‹å¥–æ±  | `postComment()`, `likeComment()`, `getPoolInfo()` | å†…å®¹å­˜å‚¨åœ¨äº‹ä»¶ |
| ç”¨æˆ·ä¸­å¿ƒ | æŸ¥çœ‹æ”¶ç›Šã€å†å² | `getUserStats()`, `getPendingRewards()` | å¿«ç…§æœºåˆ¶ |
| æ’è¡Œæ¦œ | é¡¹ç›®/ç”¨æˆ·æ’å | `getProjectLeaderboard()`, `getUserLeaderboard()` | é¢„è®¡ç®—æ’å |
| åˆ›å»ºé¡¹ç›® | æ–°å»ºé¡¹ç›® | `createProject()` | Cloneæ¨¡å¼ |
| é¡¹ç›®ç®¡ç† | ç®¡ç†å¥–æ±  | `sponsor()`, `distributeRewards()` | æ‰¹é‡æ“ä½œ |
| å¥–æ± è¯¦æƒ… | æŸ¥çœ‹åˆ†é…å†å² | `getPoolInfo()`, äº‹ä»¶æŸ¥è¯¢ | äº‹ä»¶æ—¥å¿— |

### 9.2 æ•°æ®ä¸€è‡´æ€§ä¿è¯

1. **è¯„è®ºIDè‡ªå¢**ï¼šç¡®ä¿æ—¶é—´é¡ºåºï¼Œæ”¯æŒå‰ç«¯æŒ‰æ—¶é—´æ’åº
2. **å¿«ç…§æœºåˆ¶**ï¼šå¼€å¥–æ—¶åˆ›å»ºCRTå¿«ç…§ï¼Œé¿å…é‡å¤è®¡ç®—å’ŒåŒé‡é¢†å–
3. **äº‹ä»¶æ—¥å¿—**ï¼šå…³é”®æ“ä½œéƒ½æœ‰äº‹ä»¶ï¼Œå‰ç«¯å¯ä»¥ç›‘å¬å’ŒæŸ¥è¯¢å†å²
4. **çŠ¶æ€åŒæ­¥**ï¼šç”¨æˆ·çŠ¶æ€ã€é¡¹ç›®çŠ¶æ€å®æ—¶æ›´æ–°

### 9.3 æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **å‰ç«¯ç¼“å­˜**
   - é¡¹ç›®åŸºç¡€ä¿¡æ¯å¯ç¼“å­˜
   - å†å²è¯„è®ºé€šè¿‡äº‹ä»¶æŸ¥è¯¢åç¼“å­˜
   - ç”¨æˆ·ç»Ÿè®¡æ•°æ®å®šæœŸæ›´æ–°

2. **æ‰¹é‡RPCè°ƒç”¨**
   - ä½¿ç”¨`multicall`åˆå¹¶å¤šä¸ªæŸ¥è¯¢
   - æ‰¹é‡è·å–é¡¹ç›®æ•°æ®æ¥å£
   - å‡å°‘ç½‘ç»œå¾€è¿”

3. **äº‹ä»¶ç´¢å¼•**
   - ä½¿ç”¨Graph Protocolç´¢å¼•äº‹ä»¶
   - æ„å»ºé“¾ä¸‹æ•°æ®åº“åŠ é€ŸæŸ¥è¯¢
   - å‡å°‘ç›´æ¥é“¾ä¸ŠæŸ¥è¯¢

### 9.4 å®‰å…¨æ€§éªŒè¯

1. **é˜²é‡å…¥**ï¼šæ‰€æœ‰æ¶‰åŠè½¬è´¦çš„å‡½æ•°ä½¿ç”¨ReentrancyGuard
2. **æƒé™æ§åˆ¶**ï¼šé¡¹ç›®åˆ›å»ºé™åˆ¶å¹³å°æ–¹ï¼Œå…³é”®æ“ä½œéªŒè¯æƒé™
3. **æ•°å€¼æº¢å‡º**ï¼šä½¿ç”¨SafeMathæˆ–Solidity 0.8+å†…ç½®æ£€æŸ¥
4. **å¤–éƒ¨è°ƒç”¨**ï¼šä½¿ç”¨SafeERC20å¤„ç†ä»£å¸è½¬è´¦
5. **æ—¶é—´é™åˆ¶**ï¼šå¼€å¥–å‘¨æœŸéªŒè¯ï¼Œé˜²æ­¢è¿‡æ—©å¼€å¥–

### 9.5 æ‰©å±•æ€§è®¾è®¡

1. **æ¨¡å—åŒ–æ¶æ„**ï¼šå„åˆçº¦èŒè´£æ˜ç¡®ï¼Œä¾¿äºå‡çº§
2. **æ¥å£æŠ½è±¡**ï¼šå…³é”®åŠŸèƒ½æŠ½è±¡ä¸ºæ¥å£ï¼Œä¾¿äºæ›¿æ¢å®ç°
3. **é¢„ç•™ç©ºé—´**ï¼šçŠ¶æ€å˜é‡é¢„ç•™æ‰©å±•ç©ºé—´
4. **äº‹ä»¶ç‰ˆæœ¬**ï¼šäº‹ä»¶åŒ…å«ç‰ˆæœ¬ä¿¡æ¯ï¼Œä¾¿äºåç»­å‡çº§

## 10. æ€»ç»“

æœ¬æ¥å£æ–‡æ¡£å®Œæ•´è®¾è®¡äº†CoinRealå¹³å°çš„æ™ºèƒ½åˆçº¦æ¶æ„ï¼Œå……åˆ†è€ƒè™‘äº†ï¼š

1. **åŠŸèƒ½å®Œæ•´æ€§**ï¼šæ”¯æŒå‰ç«¯æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½
2. **Gasæ•ˆç‡**ï¼šå¤šé¡¹ä¼˜åŒ–æªæ–½é™ä½ä½¿ç”¨æˆæœ¬
3. **å®‰å…¨æ€§**ï¼šå¤šé‡å®‰å…¨æœºåˆ¶ä¿æŠ¤ç”¨æˆ·èµ„äº§
4. **æ‰©å±•æ€§**ï¼šæ¨¡å—åŒ–è®¾è®¡ä¾¿äºæœªæ¥å‡çº§
5. **ç”¨æˆ·ä½“éªŒ**ï¼šæ‰¹é‡æ“ä½œã€å¿«ç…§æœºåˆ¶æå‡ä½“éªŒ

é€šè¿‡åˆç†çš„æ•°æ®ç»“æ„è®¾è®¡å’Œä¼˜åŒ–ç­–ç•¥ï¼Œç¡®ä¿äº†åˆçº¦åœ¨ä»¥å¤ªåŠç­‰é«˜Gasè´¹é“¾ä¸Šçš„å¯ç”¨æ€§ï¼ŒåŒæ—¶ä¸ºç”¨æˆ·æä¾›æµç•…çš„ä½¿ç”¨ä½“éªŒã€‚